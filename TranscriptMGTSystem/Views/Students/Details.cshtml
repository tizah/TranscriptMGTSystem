@*@model TranscriptModels.Student*@
@model TranscriptMGTSystem.ViewModels.StudentTranscriptViewModel

@{
    ViewBag.Title = "Details";
}
<script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/0.9.0rc1/jspdf.min.js"></script>
<h2>Details</h2>
<section id="content" class="row">
    <div class="col-md-6">
        <h4>Student</h4>
        <hr />
        @*<button id="cmd">Generate PDF</button>*@
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.Student.MatricNo)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.MatricNo)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.FirstName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.FirstName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.OtherNames)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.OtherNames)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.LastName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.LastName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.Email)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.Email)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.DeptName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.DeptName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.FacultyName)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.FacultyName)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.Gender)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.Gender)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.ModeOfAdmission)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.ModeOfAdmission)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.Nationality)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.Nationality)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.DateOfBirth)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.DateOfBirth)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.YearOfAttendance)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.YearOfAttendance)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.DegreeAwared)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.DegreeAwared)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.Student.YearOfAward)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Student.YearOfAward)
            </dd>

        </dl>
    </div>

    <div class="col-md-6">
    <div class="row">
        <div class="col-md-12">
            <div class="panel">
                <div class="panel-body">
                    <h3 class="title-hero">
                       
                    </h3>
                    <div class="example-box-wrapper">
                        <table style="width:100%" class="table">
                            <thead>
                                <tr>
                                    <th>Course Code</th>
                                    <th>Course Title</th>
                                    <th>Credit Unit</th>
                                    <th>Grade</th>
                                    <th>Cummulative GPA</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var session in Model.Cgpas.Distinct().ToList())
                                {
                                    <h3> Session @session.Session</h3>
                                    foreach (var grade in Model.Courses)
                                    {
                                        <tr>
                                            <td>@grade.Course.CourseCode</td>
                                            <td>@grade.Course.CourseName</td>
                                            <td>@grade.Course.CreditUint</td>
                                            <td>
                                                @grade.GradeName
                                        </td>
                                        <td>
                                            @foreach (var cgpa in grade.Student.Results.Where(x => x.StudentId.Equals(grade.StudentId)))
                                            {
                                                @cgpa.CummulativeGradePointAverage
                                            }
                                        </td>
                                    </tr>

                                }
                                }

                            </tbody>

                        </table>
                    </div>
                </div>
                </div>
        </div>
        </div>
        </div>
</section>
<p>
    @Html.ActionLink("Edit", "Edit", new { id = Model.Student.StudentId }) |
    @Html.ActionLink("Back to List", "Index")
</p>
<script type="text/javascript">

    var doc = new jsPDF();

    $('#cmd').click(function () {

        doc.fromHTML($('#content').html(), 15, 15, {
            'width': 170,
            'elementHandlers': specialElementHandlers
        });
        doc.save('sample-file.pdf');
    });
</script>